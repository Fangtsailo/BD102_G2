<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="libs/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZlV8XEYyGoIi9poFgwFzwc5X_rfvtXsE&callback">
    </script>
    <style type="text/css">
    	#map {
			width: 500px;
			height: 500px;
    	}
    </style>
</head>
<body>
   <div class="item">A: <p></p> </div>
   <div class="item">B: <p></p> </div>
   <div class="item">C: <p></p> </div>
      <div id="map"></div>
   <button id='btn'>clear</button>
   <script type="text/javascript">
    //抓 user 位置
    //點擊回傳座標
   	var globalCount = 1;
   	var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
   	var labelIndex = 0;
   	var markers = [];
   	//2.<OK>按下紐發送目前位置
   	   	initMap();
   	 if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            alert(pos);
            // infoWindow.setPosition(pos);
            // infoWindow.setContent('Location found.');
            map.setCenter(pos);
          }, function() {
          });
        } else {
        }

   	function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 16
        });
        //先輸入地址把地圖 center 移入
        //<OK>按下點放一個 marker
   		//<OK>抓位置到label (對應A B C)
   		
        google.maps.event.addListener(map, 'click', function( overlay) {
        	if (globalCount <= 3) {
	        	var point = overlay.latLng.toJSON();
	        	var beachMarker = new google.maps.Marker({
				  position: point,
				  map: map,
				  label: labels[labelIndex++ % labels.length]
				});
				markers.push(beachMarker);
				$('.item:nth-child('+globalCount+') p').text('{lat:'+overlay.latLng.lat() +',lng:'+overlay.latLng.lng() +'}');
				globalCount++;
        	}
        });
        //反悔就按全部清除鍵
        $('#btn').on('click', function(){
			for (var i = 0; i < markers.length; i++) {
			          markers[i].setMap(null);
			          $('.item:nth-child('+(i+1)+') p').text('');
			}
			markers = [];//array 要清空
			globalCount = 1;
			labelIndex = 0;
        });
                
        }
   </script>
</body>
</html>